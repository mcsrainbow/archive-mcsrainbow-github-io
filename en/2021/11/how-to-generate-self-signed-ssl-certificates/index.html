<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>How to Generate Self-signed SSL Certificates - Hey! Linux.</title><meta name="Description" content="It is also important to deploy HTTPS services for internal private domains."><meta property="og:title" content="How to Generate Self-signed SSL Certificates" />
<meta property="og:description" content="It is also important to deploy HTTPS services for internal private domains." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/" /><meta property="og:image" content="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-07T11:06:54+08:00" />
<meta property="article:modified_time" content="2021-11-07T11:06:54+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg"/>
<meta name="twitter:title" content="How to Generate Self-signed SSL Certificates"/>
<meta name="twitter:description" content="It is also important to deploy HTTPS services for internal private domains."/>
<meta name="application-name" content="Hey! Linux.">
<meta name="apple-mobile-web-app-title" content="Hey! Linux."><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/" /><link rel="prev" href="https://blog.heylinux.com/en/2021/11/notes-from-reading-the-willpower-instinct/" /><link rel="next" href="https://blog.heylinux.com/en/2021/11/cherish-the-time-to-meet-a-bright-future/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "How to Generate Self-signed SSL Certificates",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.heylinux.com\/en\/2021\/11\/how-to-generate-self-signed-ssl-certificates\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/blog.heylinux.com\/en\/2021\/11\/how-to-generate-self-signed-ssl-certificates\/featured-image.jpeg",
                            "width":  1000 ,
                            "height":  499 
                        }],"genre": "posts","keywords": "SSL, TLS, HTTPS","wordcount":  1702 ,
        "url": "https:\/\/blog.heylinux.com\/en\/2021\/11\/how-to-generate-self-signed-ssl-certificates\/","datePublished": "2021-11-07T11:06:54+08:00","dateModified": "2021-11-07T11:06:54+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "mcsrainbow","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/blog.heylinux.com\/images\/avatar.png",
                    "width":  400 ,
                    "height":  400 
                }},"author": {
                "@type": "Person",
                "name": "Dong Guo | Damon"
            },"description": "It is also important to deploy HTTPS services for internal private domains."
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/en/" title="Hey! Linux.">Hey! Linux.</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/en/posts/"> Posts </a><a class="menu-item" href="/en/tags/"> Tags </a><a class="menu-item" href="/en/categories/"> Categories </a><a class="menu-item" href="/en/about/"><i class='fas fa-user-circle fa-fw'></i>  </a><a class="menu-item" href="/./"> 简体中文 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/2021/11/%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E8%87%AA%E7%AD%BE%E5%90%8Dssl%E8%AF%81%E4%B9%A6%E6%94%AF%E6%8C%81%E7%A7%81%E6%9C%89%E5%9F%9F%E5%90%8D%E7%9A%84https%E6%9C%8D%E5%8A%A1/">简体中文</option><option value="/en/2021/11/how-to-generate-self-signed-ssl-certificates/" selected>English</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/en/" title="Hey! Linux.">Hey! Linux.</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/en/posts/" title="">Posts</a><a class="menu-item" href="/en/tags/" title="">Tags</a><a class="menu-item" href="/en/categories/" title="">Categories</a><a class="menu-item" href="/en/about/" title=""><i class='fas fa-user-circle fa-fw'></i></a><a class="menu-item" href="/./" title="">简体中文</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/2021/11/%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E8%87%AA%E7%AD%BE%E5%90%8Dssl%E8%AF%81%E4%B9%A6%E6%94%AF%E6%8C%81%E7%A7%81%E6%9C%89%E5%9F%9F%E5%90%8D%E7%9A%84https%E6%9C%8D%E5%8A%A1/">简体中文</option><option value="/en/2021/11/how-to-generate-self-signed-ssl-certificates/" selected>English</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">How to Generate Self-signed SSL Certificates</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/en/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Dong Guo | Damon</a></span>&nbsp;<span class="post-category">included in <a href="/en/categories/skills/"><i class="far fa-folder fa-fw"></i>Skills</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-11-07">2021-11-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1702 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg"
        data-srcset="/en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg, /en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg 1.5x, /en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg 2x"
        data-sizes="auto"
        alt="/en/2021/11/how-to-generate-self-signed-ssl-certificates/featured-image.jpeg"
        title="It is also important to deploy HTTPS services for internal private domains." /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#generate-ssl-certificates">Generate SSL Certificates</a>
      <ul>
        <li><a href="#1-generate-root-certificate-and-import-to-os">1. Generate root certificate and import to OS</a></li>
        <li><a href="#2-generate-server-certificate">2. Generate server certificate</a></li>
        <li><a href="#3-generate-certificate-bundles-in-different-formats">3. Generate certificate bundles in different formats</a></li>
        <li><a href="#4-convert-root-certificate-to-jks-format">4. Convert root certificate to JKS format</a></li>
      </ul>
    </li>
    <li><a href="#convert-and-view-ssl-certificates">Convert and View SSL Certificates</a>
      <ul>
        <li><a href="#1-from-p7b-to-pem">1. From P7B to PEM</a></li>
        <li><a href="#2-from-pem-to-jks">2. From PEM to JKS</a></li>
        <li><a href="#3-from-pfxp12-to-pem">3. From PFX(P12) to PEM</a></li>
        <li><a href="#4-from-p12-to-jks">4. From P12 to JKS</a></li>
        <li><a href="#5-view-certificates-in-different-formats">5. View certificates in different formats</a></li>
      </ul>
    </li>
    <li><a href="#tlsssl-certificates-without-root-certificate">TLS/SSL Certificates without Root Certificate</a></li>
    <li><a href="#generate-and-view-ssl-certificates-by-cfssl-tools">Generate and View SSL Certificates by cfssl tools</a>
      <ul>
        <li><a href="#1-install-cfssl-tools">1. Install cfssl tools</a></li>
        <li><a href="#2-generate-and-view-root-certificate">2. Generate and view root certificate</a></li>
        <li><a href="#3-generate-and-view-server-certificate">3. Generate and view server certificate</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>It is also important to deploy HTTPS services for internal private domains.</p>
<h2 id="background">Background</h2>
<p>Today, almost all Internet sites and applications are already running on HTTPS site-wide, but many companies still have internal applications running on insecure HTTP.</p>
<p>In my current job, internal security requirements are very strict and all applications must support HTTPS. So I&rsquo;m sharing my notes on how to generate self-signed SSL certificates for your reference.</p>
<h2 id="generate-ssl-certificates">Generate SSL Certificates</h2>
<h3 id="1-generate-root-certificate-and-import-to-os">1. Generate root certificate and import to OS</h3>
<p>First, generate the <code>rootCA.heylinux.com.pem</code>, set the encryption length to 4096 to meet security level requirements.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl genrsa -out rootCA.heylinux.com.key <span class="m">4096</span>
</code></pre></td></tr></table>
</div>
</div><p>Generate <code>rootCA.heylinux.com.pem</code>, set encryption <code>sha256</code>, valid days <code>3650</code>, organization <code>/C=CN/ST=Sichuan/L=Chengdu/O=HEYLINUX/OU=IT/CN=SRE</code>.</p>
<p>The <code>rootCA.heylinux.com.pem</code> will be used to generate the server key and the trusted root certification authorities of browsers such as Chrome.</p>
<p>The <code>-subj</code> parameter is more straightforward than the interactive steps.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl req -x509 -new -nodes -key rootCA.heylinux.com.key -sha256 -days <span class="m">3650</span> -out rootCA.heylinux.com.pem -subj <span class="s2">&#34;/C=CN/ST=Sichuan/L=Chengdu/O=HEYLINUX/OU=IT/CN=SRE&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Import <code>rootCA.heylinux.com.pem</code> to OS via Chrome, so the Chrome could trust the server certificate generated based on the root certificate.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="chrome-certmanager.jpeg"
        data-srcset="/en/2021/11/how-to-generate-self-signed-ssl-certificates/chrome-certmanager.jpeg, chrome-certmanager.jpeg 1.5x, /en/2021/11/how-to-generate-self-signed-ssl-certificates/chrome-certmanager.jpeg 2x"
        data-sizes="auto"
        alt="/en/2021/11/how-to-generate-self-signed-ssl-certificates/chrome-certmanager.jpeg"
        title="Chrome CertManager" /></p>
<h3 id="2-generate-server-certificate">2. Generate server certificate</h3>
<p>Create <code>ssl.conf</code>, enable <code>serverAuth</code> and <code>clientAuth</code>, wildcard DNS names as <code>*.heylinux.com</code> and <code>*.cloud.heylinux.com</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim ssl.conf
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="na">subjectAltName</span> <span class="o">=</span> <span class="s">@alt_names</span>
<span class="na">authorityKeyIdentifier</span> <span class="o">=</span> <span class="s">keyid,issuer</span>
<span class="na">keyUsage</span> <span class="o">=</span> <span class="s">digitalSignature,keyEncipherment,nonRepudiation,dataEncipherment</span>
<span class="na">extendedKeyUsage</span> <span class="o">=</span> <span class="s">serverAuth,clientAuth</span>
<span class="na">basicConstraints</span> <span class="o">=</span> <span class="s">CA:FALSE</span>
<span class="na">subjectKeyIdentifier</span> <span class="o">=</span> <span class="s">hash</span>

<span class="k">[alt_names]</span>
<span class="na">DNS.1</span> <span class="o">=</span> <span class="s">*.heylinux.com</span>
<span class="na">DNS.2</span> <span class="o">=</span> <span class="s">*.cloud.heylinux.com</span>
</code></pre></td></tr></table>
</div>
</div><p>Generate server certificate Key <code>star.heylinux.com.key</code>, organization <code>/C=CN/ST=Sichuan/L=Chengdu/O=HEYLINUX/OU=IT/CN=*.heylinux.com</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl req -new -nodes -out star.heylinux.com.csr -newkey rsa:4096 -keyout star.heylinux.com.key -subj <span class="s2">&#34;/C=CN/ST=Sichuan/L=Chengdu/O=HEYLINUX/OU=IT/CN=*.heylinux.com&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Generate <code>star.heylinux.com.crt</code>, set encryption <code>sha256</code>, valid days <code>3650</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl x509 -req -in star.heylinux.com.csr -CA rootCA.heylinux.com.pem -CAkey rootCA.heylinux.com.key -CAcreateserial -out star.heylinux.com.crt -days <span class="m">3650</span> -sha256 -extfile ssl.conf
</code></pre></td></tr></table>
</div>
</div><p>View server certificate information</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl x509 -text -noout -in star.heylinux.com.crt
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            10:f8:04:91:06:d8:4a:eb:46:ee:90:80:b4:9c:94:4e:ac:60:7b:3e
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = CN, ST = Sichuan, L = Chengdu, O = HEYLINUX, OU = IT, CN = SRE
        Validity
            Not Before: Nov  7 04:38:21 2021 GMT
            Not After : Nov  5 04:38:21 2031 GMT
        Subject: C = CN, ST = Sichuan, L = Chengdu, O = HEYLINUX, OU = IT, CN = *.heylinux.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (4096 bit)
...
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Alternative Name:
                DNS:*.heylinux.com, DNS:*.cloud.heylinux.com
            X509v3 Authority Key Identifier:
                keyid:36:20:25:BA:1A:D9:36:A3:5C:E7:94:30:7F:76:D5:DF:5D:03:99:C9

            X509v3 Key Usage:
                Digital Signature, Non Repudiation, Key Encipherment, Data Encipherment
            X509v3 Extended Key Usage:
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 Basic Constraints:
                CA:FALSE
            X509v3 Subject Key Identifier:
                DB:0D:E8:00:A4:3E:95:71:26:1A:0B:57:4C:3C:3B:33:D3:67:F0:16
...
</code></pre></td></tr></table>
</div>
</div><h3 id="3-generate-certificate-bundles-in-different-formats">3. Generate certificate bundles in different formats</h3>
<p>Certificate bundle usually contains multiple server certificates.</p>
<p>Generate <code>star.heylinux.com.p12</code> in <code>PKCS12</code>, set passphrase <code>P_Ss0rdT</code>, alias <code>heylinux_com</code>. It could be used for servers such as Tomcat.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl pkcs12 -export -in star.heylinux.com.crt -inkey star.heylinux.com.key -password pass:P_Ss0rdT -name heylinux_com -out star.heylinux.com.p12
</code></pre></td></tr></table>
</div>
</div><p>Convert <code>star.heylinux.com.p12</code> to <code>star.heylinux.com.jks</code> in <code>JKS</code>, set passphrase <code>P_Ss0rdT</code>, alias <code>heylinux_com</code>. It could be used for servers such as Tomcat.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">keytool -importkeystore -deststorepass P_Ss0rdT -destkeystore star.heylinux.com.jks -srcstorepass P_Ss0rdT -srckeystore star.heylinux.com.p12 -srcstoretype PKCS12
</code></pre></td></tr></table>
</div>
</div><p>Convert <code>star.heylinux.com.p12</code> to <code>star.heylinux.com.pem</code> in <code>PEM</code>, alias <code>heylinux_com</code>,no passphrase. It could be used for servers such as Apache、Nginx、HAProxy and AWS ELB.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">openssl pkcs12 -password pass:P_Ss0rdT -in star.heylinux.com.p12 -out star.heylinux.com.pem -nodes
</code></pre></td></tr></table>
</div>
</div><h3 id="4-convert-root-certificate-to-jks-format">4. Convert root certificate to JKS format</h3>
<p>Convert <code>rootCA.heylinux.com.pem</code> to <code>rootCA.heylinux.com.jks</code>, alias <code>heylinux_com</code>, for Java applications to verify server certificate.</p>
<p>The principle is similar to the above &ldquo;import the root certificate to OS via Chrome, so the Chrome could trust the server certificate generated based on the root certificate&rdquo;.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Convert rootCA.heylinux.com.pem to rootCA.heylinux.com.der</span>
openssl x509 -in rootCA.heylinux.com.pem -out rootCA.heylinux.com.der -outform der

<span class="c1"># View rootCA.heylinux.com.der</span>
keytool -v -printcert -file rootCA.heylinux.com.der

<span class="c1"># Convert rootCA.heylinux.com.der to rootCA.heylinux.com.jks, alias heylinux_com</span>
keytool -importcert -alias heylinux_com -keystore rootCA.heylinux.com.jks -storepass P_Ss0rdT -file rootCA.heylinux.com.der

<span class="c1"># View rootCA.heylinux.com.jks</span>
keytool -keystore rootCA.heylinux.com.jks -storepass P_Ss0rdT -list
</code></pre></td></tr></table>
</div>
</div><h2 id="convert-and-view-ssl-certificates">Convert and View SSL Certificates</h2>
<h3 id="1-from-p7b-to-pem">1. From P7B to PEM</h3>
<p>Convert <code>SubCA_2.p7b</code> to <code>rootCA.heylinux.com.pem</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl pkcs7 -inform DER -print_certs -in SubCA_2.p7b -out rootCA.heylinux.com.pem
</code></pre></td></tr></table>
</div>
</div><h3 id="2-from-pem-to-jks">2. From PEM to JKS</h3>
<p>Convert <code>rootCA.heylinux.com.pem</code> to <code>rootCA.heylinux.com.jks</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Convert rootCA.heylinux.com.pem to rootCA.heylinux.com.der</span>
openssl x509 -in rootCA.heylinux.com.pem -out rootCA.heylinux.com.der -outform der

<span class="c1"># Convert rootCA.heylinux.com.der to rootCA.heylinux.com.jks, alias heylinux_com</span>
keytool -importcert -alias heylinux_com -keystore rootCA.heylinux.com.jks -storepass P_Ss0rdT -file rootCA.heylinux.com.der
</code></pre></td></tr></table>
</div>
</div><h3 id="3-from-pfxp12-to-pem">3. From PFX(P12) to PEM</h3>
<p>Convert <code>star.heylinux.com.pfx</code> to <code>star.heylinux.com.pem</code>, which including the items of <code>star.heylinux.com.key</code> and <code>star.heylinux.com.crt</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">openssl pkcs12 -password pass:P_Ss0rdT -nodes -in star.heylinux.com.pfx -out star.heylinux.com.pem
</code></pre></td></tr></table>
</div>
</div><h3 id="4-from-p12-to-jks">4. From P12 to JKS</h3>
<p>Convert <code>star.heylinux.com.p12</code> to <code>star.heylinux.com.jks</code>, alias <code>heylinux_com</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">keytool -importkeystore -deststorepass P_Ss0rdT -destkeystore star.heylinux.com.jks -srcstorepass P_Ss0rdT -srckeystore star.heylinux.com.p12 -srcstoretype PKCS12 -alias heylinux_com
</code></pre></td></tr></table>
</div>
</div><h3 id="5-view-certificates-in-different-formats">5. View certificates in different formats</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># View rootCA.heylinux.com.pem and star.heylinux.com.pem</span>
openssl x509 -noout -text -in rootCA.heylinux.com.pem 
openssl x509 -noout -text -in star.heylinux.com.pem

<span class="c1"># View star.heylinux.com.p12 </span>
keytool -list -v -keystore star.heylinux.com.p12 -storepass P_Ss0rdT -storetype PKCS12

<span class="c1"># View star.heylinux.com.jks</span>
keytool -list -v -keystore star.heylinux.com.jks -storepass P_Ss0rdT
</code></pre></td></tr></table>
</div>
</div><h2 id="tlsssl-certificates-without-root-certificate">TLS/SSL Certificates without Root Certificate</h2>
<p>For applications such as NiFi, vsFTPd, the TLS/SSL certificates are mainly used for client and server verification, similar to the authentication between private and public keys in SSH, this kind of certificates could be used without the root certificate.</p>
<p>Create <code>tls.conf</code>, set IPs as <code>10.8.5.7</code> and <code>10.2.3.4</code>, wildcard DNS names as <code>*.heylinux.com</code> and <code>*.cloud.heylinux.com</code>, organization <code>/C=CN/ST=Sichuan/L=Chengdu/O=HEYLINUX/OU=IT/CN=SRE</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim tls.conf
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[req]</span>
<span class="na">prompt</span> <span class="o">=</span> <span class="s">no</span>
<span class="na">req_extensions</span> <span class="o">=</span> <span class="s">req_ext</span>
<span class="na">distinguished_name</span> <span class="o">=</span> <span class="s">dn</span>

<span class="k">[dn]</span>
 <span class="na">C</span> <span class="o">=</span> <span class="s">CN</span>
<span class="na">ST</span> <span class="o">=</span> <span class="s">Sichuan
</span><span class="s"> L = Chengdu
</span><span class="s"> O = HEYLINUX</span>
<span class="na">OU</span> <span class="o">=</span> <span class="s">IT</span>
<span class="na">CN</span> <span class="o">=</span> <span class="s">SRE</span>

<span class="k">[req_ext]</span>
<span class="na">subjectAltName</span> <span class="o">=</span> <span class="s">@alt_names</span>

<span class="k">[alt_names]</span>
<span class="na">IP.1</span> <span class="o">=</span> <span class="s">10.8.5.7</span>
<span class="na">IP.2</span> <span class="o">=</span> <span class="s">10.2.3.4</span>
<span class="na">DNS.1</span> <span class="o">=</span> <span class="s">*.heylinux.com</span>
<span class="na">DNS.2</span> <span class="o">=</span> <span class="s">*.cloud.heylinux.com</span>
</code></pre></td></tr></table>
</div>
</div><p>Generate server certificates <code>heylinux-ssl-keypair.key</code> and <code>heylinux-ssl-keypair.crt</code>, set encryption <code>sha256</code>, valid days <code>3650</code>, passphrase <code>P_Ss0rdT</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Generate heylinux-ssl-keypair.key and heylinux-ssl-keypair.crt</span>
openssl req -x509 -newkey rsa:4096 -keyout heylinux-ssl-keypair.key -out heylinux-ssl-keypair.crt -days <span class="m">3650</span> -sha256 -extensions req_ext -config tls.conf

<span class="c1"># Input password</span>
Generating a RSA private key
....................................+++++
writing new private key to <span class="s1">&#39;heylinux-ssl-keypair.key&#39;</span>
Enter PEM pass phrase: P_Ss0rdT
Verifying - Enter PEM pass phrase: P_Ss0rdT

<span class="c1"># Convert certificates to certificate bundle heylinux-ssl-keypair.p12</span>
openssl pkcs12 -export -in heylinux-ssl-keypair.crt -inkey heylinux-ssl-keypair.key -password pass:P_Ss0rdT -name heylinux_ssl_keypair -out heylinux-ssl-keypair.p12

<span class="c1"># Input password</span>
Enter pass phrase <span class="k">for</span> heylinux-ssl-keypair.key: P_Ss0rdT

<span class="c1"># View certificate bundle heylinux-ssl-keypair.p12</span>
keytool -list -v -keystore heylinux-ssl-keypair.p12 -storepass P_Ss0rdT -storetype PKCS12
</code></pre></td></tr></table>
</div>
</div><h2 id="generate-and-view-ssl-certificates-by-cfssl-tools">Generate and View SSL Certificates by cfssl tools</h2>
<h3 id="1-install-cfssl-tools">1. Install cfssl tools</h3>
<p>Download <code>cfssl</code>, <code>cfssljson</code>, <code>cfssl-certinfo</code> and grant execute permission.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 -O /usr/local/bin/cfssl
sudo wget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 -O /usr/local/bin/cfssljson
sudo wget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64 -O /usr/local/bin/cfssl-certinfo
sudo chmod +x /usr/local/bin/cfssl*
</code></pre></td></tr></table>
</div>
</div><h3 id="2-generate-and-view-root-certificate">2. Generate and view root certificate</h3>
<p>Create <code>rootCA.json</code>, generate the similar <code>rootCA.heylinux.com.key</code>(encryption length is only 2048 due to cfssl cannot set the key with different encryption length) and <code>rootCA.heylinux.com.pem</code> as above.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;CA&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;expiry&#34;</span><span class="p">:</span> <span class="s2">&#34;87600h&#34;</span><span class="p">,</span>
        <span class="nt">&#34;pathlen&#34;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">&#34;CN&#34;</span><span class="p">:</span> <span class="s2">&#34;SRE&#34;</span><span class="p">,</span>
    <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;algo&#34;</span><span class="p">:</span> <span class="s2">&#34;rsa&#34;</span><span class="p">,</span>
        <span class="nt">&#34;size&#34;</span><span class="p">:</span> <span class="mi">2048</span>
    <span class="p">},</span>
    <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;C&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
            <span class="nt">&#34;ST&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
            <span class="nt">&#34;L&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
            <span class="nt">&#34;O&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
            <span class="nt">&#34;OU&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cfssl gencert -initca rootCA.json <span class="p">|</span> cfssljson -bare rootCA.heylinux.com
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2021/11/13 05:11:48 [INFO] generating a new CA key and certificate from CSR
2021/11/13 05:11:48 [INFO] generate received request
2021/11/13 05:11:48 [INFO] received CSR
2021/11/13 05:11:48 [INFO] generating key: rsa-2048
2021/11/13 05:11:48 [INFO] encoded CSR
2021/11/13 05:11:48 [INFO] signed certificate with serial number 644632230923530854661361284854682897812867573233
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ls -1
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rootCA.heylinux.com.csr
rootCA.heylinux.com-key.pem
rootCA.heylinux.com.pem
rootCA.json
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mv rootCA.heylinux.com-key.pem rootCA.heylinux.com.key
</code></pre></td></tr></table>
</div>
</div><p>View <code>rootCA.heylinux.com.pem</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cfssl-certinfo -cert rootCA.heylinux.com.pem
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;subject&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;common_name&#34;</span><span class="p">:</span> <span class="s2">&#34;SRE&#34;</span><span class="p">,</span>
    <span class="nt">&#34;country&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organization&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organizational_unit&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locality&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
    <span class="nt">&#34;province&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
    <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
      <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
      <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
      <span class="s2">&#34;SRE&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;issuer&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;common_name&#34;</span><span class="p">:</span> <span class="s2">&#34;SRE&#34;</span><span class="p">,</span>
    <span class="nt">&#34;country&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organization&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organizational_unit&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locality&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
    <span class="nt">&#34;province&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
    <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
      <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
      <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
      <span class="s2">&#34;SRE&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;serial_number&#34;</span><span class="p">:</span> <span class="s2">&#34;644632230923530854661361284854682897812867573233&#34;</span><span class="p">,</span>
  <span class="nt">&#34;not_before&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-11-12T20:53:00Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;not_after&#34;</span><span class="p">:</span> <span class="s2">&#34;2031-11-10T20:53:00Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;sigalg&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256WithRSA&#34;</span><span class="p">,</span>
  <span class="nt">&#34;authority_key_id&#34;</span><span class="p">:</span> <span class="s2">&#34;36:D1:86:6B:27:AE:24:EF:C7:B3:2B:25:E7:92:DE:F1:0:34:2B:E5&#34;</span><span class="p">,</span>
  <span class="nt">&#34;subject_key_id&#34;</span><span class="p">:</span> <span class="s2">&#34;36:D1:86:6B:27:AE:24:EF:C7:B3:2B:25:E7:92:DE:F1:0:34:2B:E5&#34;</span><span class="p">,</span>
  <span class="nt">&#34;pem&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----\n&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-generate-and-view-server-certificate">3. Generate and view server certificate</h3>
<p>Create <code>ssl-config.json</code> and <code>ssl.json</code>, generate the similar <code>star.heylinux.com.key</code>(encryption length is only 2048 due to cfssl cannot set the key with different encryption length) and <code>star.heylinux.com.crt</code> as above.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim ssl-config.json
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;signing&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;expiry&#34;</span><span class="p">:</span> <span class="s2">&#34;87600h&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;profiles&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;server&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;usages&#34;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&#34;signing&#34;</span><span class="p">,</span>
          <span class="s2">&#34;key encipherment&#34;</span><span class="p">,</span>
          <span class="s2">&#34;server auth&#34;</span><span class="p">,</span>
          <span class="s2">&#34;client auth&#34;</span>
        <span class="p">],</span>
        <span class="nt">&#34;expiry&#34;</span><span class="p">:</span> <span class="s2">&#34;87600h&#34;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vim ssl.json
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;CN&#34;</span><span class="p">:</span> <span class="s2">&#34;*.heylinux.com&#34;</span><span class="p">,</span>
  <span class="nt">&#34;hosts&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;*.heylinux.com&#34;</span><span class="p">,</span>
    <span class="s2">&#34;*.cloud.heylinux.com&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;algo&#34;</span><span class="p">:</span> <span class="s2">&#34;rsa&#34;</span><span class="p">,</span>
    <span class="nt">&#34;size&#34;</span><span class="p">:</span> <span class="mi">2048</span>
  <span class="p">},</span>
  <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&#34;C&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
    <span class="nt">&#34;ST&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
    <span class="nt">&#34;L&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
    <span class="nt">&#34;O&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
    <span class="nt">&#34;OU&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cfssl gencert -ca<span class="o">=</span>rootCA.heylinux.com.pem -ca-key<span class="o">=</span>rootCA.heylinux.com.key -config<span class="o">=</span>ssl-config.json -profile<span class="o">=</span>server ssl.json <span class="p">|</span> cfssljson -bare star.heylinux.com

mv star.heylinux.com.pem star.heylinux.com.crt
mv star.heylinux.com-key.pem star.heylinux.com.key

ls -1
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rootCA.heylinux.com.csr
rootCA.heylinux.com.key
rootCA.heylinux.com.pem
rootCA.json
ssl-config.json
ssl.json
star.heylinux.com.crt
star.heylinux.com.csr
star.heylinux.com.key
</code></pre></td></tr></table>
</div>
</div><p>View <code>star.heylinux.com.crt</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cfssl-certinfo -cert star.heylinux.com.crt
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;subject&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;common_name&#34;</span><span class="p">:</span> <span class="s2">&#34;*.heylinux.com&#34;</span><span class="p">,</span>
    <span class="nt">&#34;country&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organization&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organizational_unit&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locality&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
    <span class="nt">&#34;province&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
    <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
      <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
      <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
      <span class="s2">&#34;*.heylinux.com&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;issuer&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;common_name&#34;</span><span class="p">:</span> <span class="s2">&#34;SRE&#34;</span><span class="p">,</span>
    <span class="nt">&#34;country&#34;</span><span class="p">:</span> <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organization&#34;</span><span class="p">:</span> <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
    <span class="nt">&#34;organizational_unit&#34;</span><span class="p">:</span> <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
    <span class="nt">&#34;locality&#34;</span><span class="p">:</span> <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
    <span class="nt">&#34;province&#34;</span><span class="p">:</span> <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
    <span class="nt">&#34;names&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;CN&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Sichuan&#34;</span><span class="p">,</span>
      <span class="s2">&#34;Chengdu&#34;</span><span class="p">,</span>
      <span class="s2">&#34;HEYLINUX&#34;</span><span class="p">,</span>
      <span class="s2">&#34;IT&#34;</span><span class="p">,</span>
      <span class="s2">&#34;SRE&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;serial_number&#34;</span><span class="p">:</span> <span class="s2">&#34;608638693485247133136510097809090433439285866629&#34;</span><span class="p">,</span>
  <span class="nt">&#34;sans&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;*.heylinux.com&#34;</span><span class="p">,</span>
    <span class="s2">&#34;*.cloud.heylinux.com&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;not_before&#34;</span><span class="p">:</span> <span class="s2">&#34;2021-11-12T21:20:00Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;not_after&#34;</span><span class="p">:</span> <span class="s2">&#34;2031-11-10T21:20:00Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;sigalg&#34;</span><span class="p">:</span> <span class="s2">&#34;SHA256WithRSA&#34;</span><span class="p">,</span>
  <span class="nt">&#34;authority_key_id&#34;</span><span class="p">:</span> <span class="s2">&#34;2B:D4:44:57:4D:9:D8:9A:0:63:4C:5B:B8:78:F4:8F:45:9C:3C:F5&#34;</span><span class="p">,</span>
  <span class="nt">&#34;subject_key_id&#34;</span><span class="p">:</span> <span class="s2">&#34;4E:15:55:4A:34:EA:BA:69:3E:A5:F:40:74:16:52:F0:88:C3:7D:6F&#34;</span><span class="p">,</span>
  <span class="nt">&#34;pem&#34;</span><span class="p">:</span> <span class="s2">&#34;-----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----\n&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-11-07</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/en/2021/11/how-to-generate-self-signed-ssl-certificates/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/" data-title="How to Generate Self-signed SSL Certificates" data-hashtags="SSL,TLS,HTTPS"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on LinkedIn" data-sharer="linkedin" data-url="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/" data-title="How to Generate Self-signed SSL Certificates"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="Share on Evernote" data-sharer="evernote" data-url="https://blog.heylinux.com/en/2021/11/how-to-generate-self-signed-ssl-certificates/" data-title="How to Generate Self-signed SSL Certificates"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/en/tags/ssl/">SSL</a>,&nbsp;<a href="/en/tags/tls/">TLS</a>,&nbsp;<a href="/en/tags/https/">HTTPS</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/en/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/en/2021/11/notes-from-reading-the-willpower-instinct/" class="prev" rel="prev" title="Notes from reading &#39;The Willpower Instinct&#39;"><i class="fas fa-angle-left fa-fw"></i>Notes from reading &#39;The Willpower Instinct&#39;</a>
            <a href="/en/2021/11/cherish-the-time-to-meet-a-bright-future/" class="next" rel="next" title="Cherish the Time to Meet A Bright Future">Cherish the Time to Meet A Bright Future<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/en/" target="_blank">mcsrainbow</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/en/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
